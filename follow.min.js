function queryStringParse(){localStorage.getItem("follow-"+username)?document.getElementById("github-follow").innerHTML=localStorage.getItem("follow-"+username):document.getElementById("github-follow").innerHTML="Follow";var e=getParameterByName("code");e&&getAccessToken(e)}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=t.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}function getAccessCode(){localStorage.getItem("access_token"+username)?Follow(localStorage.getItem("access_token"+username)):window.open("http://github.com/login/oauth/authorize?client_id="+client_id+"&scope=user:follow&redirect_uri="+redirect_uri+"&state="+random,"_self")}function getAccessToken(e){var t=new XMLHttpRequest,o="https://crossorigin.me/http://github.com/login/oauth/access_token?client_id="+client_id+"&client_secret="+client_secret+"&code="+e+"&redirect_uri="+redirect_uri+"&state="+random;t.open("POST",o,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4==t.readyState)if(200==t.status){var e=t.responseText.slice(13,53);localStorage.setItem("access_token"+username,e),Follow(e)}else alert("Error loading page\n")},t.send(!0)}function Follow(e){var t=new XMLHttpRequest,o="text/plain";"Follow"==document.getElementById("github-follow").innerHTML?(t.open("PUT","https://api.github.com/user/following/"+username,!0),localStorage.setItem("follow-"+username,"Unfollow")):(t.open("DELETE","https://api.github.com/user/following/"+username,!0),localStorage.setItem("follow-"+username,"Follow")),t.setRequestHeader("Content-Type",o),t.setRequestHeader("Authorization","token "+e),t.send(null),t.onreadystatechange=function(){4==t.readyState&&(204==t.status?(document.getElementById("github-follow").innerHTML=localStorage.getItem("follow-"+username),location.href=redirect_uri):window.open("https://www.github.com/"+username,"_self"))}}var client_id="e644584e5ceb8a2eb2c1",client_secret="9509bfb80f2faf2453553f4d8048519ddb263039",redirect_uri="http://www.venkkateshsekar.me/follow/",origin="http://www.venkkateshsekar.me",random=(Math.random()+1).toString(36).substring(7),username="Spockuto";window.onload=queryStringParse;